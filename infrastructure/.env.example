# ===========================================
# FlowForge Infrastructure - Environment Configuration
# ===========================================
# Copy this file to .env and configure your values
# NEVER commit the .env file to version control
# ===========================================

# ===========================================
# ENVIRONMENT
# ===========================================
ENVIRONMENT=production
COMPOSE_PROJECT_NAME=flowforge-infrastructure

# ===========================================
# POSTGRESQL CONFIGURATION
# ===========================================
# Primary PostgreSQL settings
POSTGRES_USER=flowforge
POSTGRES_PASSWORD=<CHANGE_ME_STRONG_PASSWORD_32_CHARS>
POSTGRES_DB=flowforge_db
POSTGRES_PORT=5432

# Connection pool settings (for application use)
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_SHARED_BUFFERS=256MB

# ===========================================
# KONG POSTGRESQL CONFIGURATION
# ===========================================
# Separate user/database for Kong Gateway
KONG_PG_USER=kong
KONG_PG_PASSWORD=<CHANGE_ME_KONG_PASSWORD_32_CHARS>
KONG_PG_DATABASE=kong_db

# ===========================================
# REDIS CONFIGURATION
# ===========================================
REDIS_PASSWORD=<CHANGE_ME_REDIS_PASSWORD_32_CHARS>
REDIS_PORT=6379
REDIS_MAXMEMORY=512mb

# ===========================================
# QDRANT CONFIGURATION
# ===========================================
QDRANT_HTTP_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_TELEMETRY_DISABLED=true
QDRANT_LOG_LEVEL=INFO

# Optional: API Key for Qdrant (v1.7+)
# QDRANT_API_KEY=<CHANGE_ME_QDRANT_API_KEY>

# ===========================================
# KONG GATEWAY CONFIGURATION
# ===========================================
# Port configuration
KONG_PROXY_PORT=8000
KONG_ADMIN_PORT=8001
KONG_PROXY_SSL_PORT=8443
KONG_ADMIN_SSL_PORT=8444

# Admin settings
KONG_ADMIN_PASSWORD=<CHANGE_ME_KONG_ADMIN_PASSWORD>
KONG_ADMIN_GUI_URL=http://localhost:8002

# Logging
KONG_LOG_LEVEL=notice

# Performance tuning
KONG_NGINX_WORKER_PROCESSES=auto

# User (use 'kong' for production, can be left empty)
KONG_USER=kong

# ===========================================
# SSL/TLS CONFIGURATION (Production)
# ===========================================
# Paths to SSL certificates (relative to infrastructure/certs/)
# KONG_SSL_CERT=/etc/kong/certs/server.crt
# KONG_SSL_CERT_KEY=/etc/kong/certs/server.key
# KONG_ADMIN_SSL_CERT=/etc/kong/certs/admin.crt
# KONG_ADMIN_SSL_CERT_KEY=/etc/kong/certs/admin.key

# ===========================================
# MONITORING (Optional)
# ===========================================
# Prometheus metrics
# PROMETHEUS_ENABLED=true
# PROMETHEUS_PORT=9090

# Grafana dashboards
# GRAFANA_ADMIN_USER=admin
# GRAFANA_ADMIN_PASSWORD=<CHANGE_ME_GRAFANA_PASSWORD>
# GRAFANA_PORT=3000

# ===========================================
# BACKUP CONFIGURATION (Optional)
# ===========================================
# BACKUP_ENABLED=true
# BACKUP_RETENTION_DAYS=30
# BACKUP_SCHEDULE="0 2 * * *"
# BACKUP_S3_BUCKET=flowforge-backups
# AWS_ACCESS_KEY_ID=<YOUR_AWS_ACCESS_KEY>
# AWS_SECRET_ACCESS_KEY=<YOUR_AWS_SECRET_KEY>
# AWS_REGION=us-east-1

# ===========================================
# NOTES
# ===========================================
# 1. All passwords should be at least 32 characters
# 2. Use a password generator: openssl rand -base64 32
# 3. For production, use secrets management (Vault, AWS Secrets Manager)
# 4. Enable SSL/TLS for all external-facing services
# 5. Review and adjust resource limits based on your infrastructure
